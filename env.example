# =============================================================================
# DOC INSIGHT APPLICATION - CONSOLIDATED ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and modify as needed for your environment
# This file contains all environment variables for both frontend and backend

# =============================================================================
# GENERAL APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=development
APP_NAME=Doc Insight
APP_VERSION=1.0.0

# =============================================================================
# FRONTEND CONFIGURATION (Angular Portal)
# =============================================================================
# Frontend URLs and endpoints
FRONTEND_URL=http://localhost:4200
API_URL=http://localhost:3000/api
AUTH_URL=http://localhost:3000/api/auth
RAG_SERVICE_URL=http://localhost:8000

# Frontend ports
FRONTEND_PORT=4200

# =============================================================================
# BACKEND API CONFIGURATION (Node.js)
# =============================================================================
# Server configuration
API_PORT=3000
API_HOST=localhost

# Database configuration
DB_HOST=postgres
DB_PORT=5432
DB_NAME=doc_insight
DB_USER=postgres
DB_PASSWORD=password_1234
DB_SSL=false

# Alternative database URL (overrides individual DB settings if provided)
DATABASE_URL=postgresql://postgres:password_1234@postgres:5435/doc_insight

# Test database configuration
DB_NAME_TEST=doc_insight_test
DATABASE_URL_TEST=postgresql://postgres:password_1234@postgres:5435/doc_insight_test

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production-make-it-long-and-random
JWT_REFRESH_SECRET=your-refresh-secret-key-change-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=doc-insight-api
JWT_AUDIENCE=doc-insight-portal
JWT_ALGORITHM=HS256

# Password hashing
BCRYPT_ROUNDS=12

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:4200,http://localhost:3001
FRONTEND_URL_CORS=https://yourdomain.com

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,md

# =============================================================================
# INGESTION SERVICE CONFIGURATION
# =============================================================================
# Python service configuration
PYTHON_SERVICE_URL=http://localhost:8000
PYTHON_SERVICE_API_KEY=your_python_service_api_key

# Mock ingestion service (set to 'true' for development/testing)
USE_MOCK_INGESTION=true

# Mock service settings
MOCK_INGESTION_MIN_TIME=2000
MOCK_INGESTION_MAX_TIME=10000
MOCK_INGESTION_FAILURE_RATE=0.1
MOCK_INGESTION_MAX_RETRIES=3
MOCK_INGESTION_AUTO_CLEANUP=false
MOCK_INGESTION_CLEANUP_INTERVAL=300000
MOCK_INGESTION_MAX_AGE=3600000

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
# PostgreSQL settings
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password_1234
POSTGRES_DB=doc_insight
POSTGRES_PORT=5435

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FILE=./logs/app.log
LOG_ERROR_FILE=./logs/error.log

# =============================================================================
# DOCKER COMPOSE CONFIGURATION
# =============================================================================
# These variables are used by Docker Compose for service configuration
# Database URL for Docker services
DOCKER_DATABASE_URL=postgresql://postgres:password_1234@postgres:5432/doc_insight

# Service URLs for Docker networking
DOCKER_API_BASE_URL=http://api-backend:3000
DOCKER_RAG_BASE_URL=http://rag-service:8000

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Uncomment and modify these for production deployment
# NODE_ENV=production
# JWT_SECRET=your-production-jwt-secret-here
# JWT_REFRESH_SECRET=your-production-refresh-secret-here
# DB_PASSWORD=your-production-db-password
# POSTGRES_PASSWORD=your-production-postgres-password
# USE_MOCK_INGESTION=false
# LOG_LEVEL=warn
# CORS_ORIGINS=https://yourdomain.com
# FRONTEND_URL=https://yourdomain.com
# API_URL=https://api.yourdomain.com/api
# AUTH_URL=https://api.yourdomain.com/api/auth
# RAG_SERVICE_URL=https://rag.yourdomain.com